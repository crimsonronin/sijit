<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
	"http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<title>Functional Testing Sds/Common/Form/FormFactory</title>
		<style type="text/css">
            @import "../../../../themes/bootstrap/css/bootstrap.css";
            @import "../../../../themes/bootstrap/css/bootstrap-responsive.css";
		</style>
        <script type="text/javascript" src="../../../testconfig.js"></script>
        <script type="text/javascript" src="../../../../../dojo/dojo.js"></script>
		<script type="text/javascript">
			require([
                'dojo/dom',
                'dojo/_base/json',
                'Sds/Common/Form/formFactory',
                'Sds/Test/Common/Form/Asset/metadata',
                'dojo/domReady!'
            ],
            function(
                dom,
                json,
                formFactory,
                metadata
            ){

                formFactory.createForm(metadata).then(function(form1){

                    form1.watch('state', function(property, oldValue, newValue){
                        dom.byId('state1').innerHTML = newValue;
                    });
                    form1.watch('value', function(property, oldValue, newValue){
                        dom.byId('value1').innerHTML = json.toJson(newValue);
                    });

                    dom.byId('formContainer1').appendChild(form1.domNode);
                    form1.startup();

                    var model = {username: 'Toby', 'password': 'password1'};
                    form1.set('value', model);

                    dom.byId('state1').innerHTML = form1.get('state');
                });

                formFactory.createForm(metadata).then(function(form2){

                    form2.watch('state', function(property, oldValue, newValue){
                        dom.byId('state2').innerHTML = newValue;
                    });
                    form2.watch('value', function(property, oldValue, newValue){
                        dom.byId('value2').innerHTML = json.toJson(newValue);
                    });

                    dom.byId('formContainer2').appendChild(form2.domNode);
                    form2.startup();

                    var model = {username: 'Not Toby', 'password': 'password1'};
                    form2.set('value', model);

                    dom.byId('state2').innerHTML = form2.get('state');
                });

                formFactory.createForm(metadata).then(function(form3){

                    form3.watch('state', function(property, oldValue, newValue){
                        dom.byId('state3').innerHTML = newValue;
                    });
                    form3.watch('value', function(property, oldValue, newValue){
                        dom.byId('value3').innerHTML = json.toJson(newValue);
                    });

                    dom.byId('formContainer3').appendChild(form3.domNode);
                    form3.startup();

                    var model = {username: 'Toby', 'password': 'x'};
                    form3.set('value', model);

                    dom.byId('state3').innerHTML = form3.get('state');
                });
            })
		</script>
	</head>
	<body>
        <h1>Functional Testing Sds/Common/Form/FormFactory</h1>
        <br />
        <div id="formContainer1">
            <h3>Valid Form (state: <span id="state1"></span>, value: <span id="value1"></span>)</h3>
        </div>
        <div id="formContainer2">
            <h3>Invalid Form Validator (state: <span id="state2"></span>, value: <span id="value2"></span>)</h3>
        </div>
        <div id="formContainer3">
            <h3>Invalid Field Validator (state: <span id="state3"></span>, value: <span id="value3"></span>)</h3>
        </div>
	</body>
</html>
